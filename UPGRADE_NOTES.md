# 🦞 OpenClaw Token Dashboard - UI/UX 升級完成

> ⚡ **v2.0.0 - 賽博朋克主題版本**  
> 霓虹未來科技風 · 發光特效 · 流動動畫

## 📋 升級內容概覽

本次升級全面優化了 Token Dashboard 的使用者介面與體驗，採用賽博朋克主題設計，新增了多項實用功能與視覺特效。

---

## ⚡ 賽博朋克主題特色

### 🎨 全新配色系統
| 顏色 | 色碼 | 用途 |
|------|------|------|
| **霓虹粉** | `#ff0080` | 主按鈕、當前模型、強調元素 |
| **電光藍** | `#00f0ff` | 文字標籤、邊框、懸停效果 |
| **螢光綠** | `#00ff88` | 成功狀態、配額充足 |
| **深夜藍** | `#1a1a2e` | 背景、卡片 |
| **警告橙** | `#ffaa00` | Cooldown、警告狀態 |

### 🌌 視覺特效
- ✨ **網格背景**：賽博朋克風格的 50px 網格線
- 💫 **脈動光暈**：背景中心的粉紅色光暈（8秒循環）
- 🌊 **霓虹流動線**：Header 底部彩色流動線（3秒循環）
- 💎 **發光邊框**：所有卡片帶霓虹發光效果
- ✨ **文字發光**：標題和數字帶多層 text-shadow
- 🔄 **掃描線動畫**：卡片懸停時的橫向掃描效果
- ⭐ **旋轉光暈**：按鈕懸停時的 360度旋轉光暈

---

## ✨ 新增功能

### 1. **頂部控制面板** 🎛️
- **當前模型顯示**：即時顯示正在使用的 AI 模型
- **Gateway 狀態指示器**：帶脈動動畫的狀態點，綠色=運行中，紅色=已停止
- **配額圓形圖**：視覺化顯示當前模型配額剩餘百分比
  - 綠色 (≥70%)：配額充足
  - 黃色 (30-69%)：配額偏低
  - 紅色 (<30%)：配額不足
- **刷新倒數計時器**：顯示距離下次自動刷新的剩餘時間

### 2. **智能模型切換** 🔄
- **一鍵切換模型**：點擊「切換模型」按鈕開啟模型選擇器
- **完整模型資訊**：
  - Provider 來源
  - 配額剩餘百分比
  - Cooldown 倒數計時（若有）
- **智能推薦系統**：自動推薦配額充足的最佳模型
- **視覺化狀態**：
  - ⭐ 當前使用中的模型
  - 可用模型：綠色邊框
  - Cooldown 模型：灰色斜紋背景

### 3. **Cooldown 倒數計時器** ⏱️
- 圓形進度條顯示 Cooldown 剩餘時間
- 自動格式化時間（例如：2h30m、15m45s）
- 直觀的視覺反饋

### 4. **Toast 通知系統** 🔔
- **即時反饋**：操作成功/失敗立即通知
- **四種類型**：
  - ✅ 成功（綠色）
  - ⚠️ 警告（黃色）
  - ❌ 錯誤（紅色）
  - ℹ️ 資訊（藍色）
- **自動消失**：3 秒後自動移除，可手動關閉

### 5. **警告橫幅** ⚠️
- 當 Gateway 未運行或配額不足時自動顯示
- 一鍵處理按鈕

### 6. **1 秒即時刷新** ⚡
- 從原本的 30 秒更新改為 **1 秒即時同步**
- 確保用量數據始終是最新的
- 倒數計時器顯示下次刷新時間

### 7. **現代化 UI 設計** 🎨
- **漸層色彩**：紫色系配色方案 (#667eea → #764ba2)
- **圓角設計**：所有元素使用柔和的圓角
- **陰影與深度**：卡片陰影提升視覺層次
- **動畫效果**：
  - 按鈕懸停：上浮效果 + 陰影增強
  - Modal 開啟：淡入 + 向上滑動
  - Toast 通知：從右側滑入
  - 狀態點：脈動動畫
- **響應式設計**：完美支援手機、平板、桌機

---

## 🚀 使用方法

### 啟動 Dashboard

```bash
# 進入專案資料夾
cd /Users/user/clawd/projects/token-dashboard

# 啟動伺服器
node backend/server.js
```

### 訪問介面

開啟瀏覽器前往：**http://localhost:3737**

### 切換模型步驟

1. 點擊頂部控制面板的「🔄 切換模型」按鈕
2. 查看所有可用模型的狀態
3. 選擇您想要的模型，點擊「切換到此模型」
4. 系統會自動：
   - 更新 `~/.openclaw/openclaw.json` 配置
   - 重啟 Gateway 服務
   - 顯示切換成功的通知
5. 頂部面板立即更新為新模型

---

## 📁 檔案結構

```
token-dashboard/
├── backend/
│   ├── server.js           # 主伺服器（已升級）
│   ├── collector/
│   │   └── collect.js      # 數據收集腳本
│   ├── db/
│   │   └── openclaw-tokens.db
│   └── utils/
│       └── pricing.js
├── frontend/
│   ├── index.html          # 主頁面（已升級）
│   ├── css/
│   │   └── main.css        # 樣式表（已升級）
│   └── js/
│       └── main.js         # 前端邏輯（已升級）
└── UPGRADE_NOTES.md        # 本文件
```

---

## 🔧 新增 API 端點

### `GET /api/config`
**功能**：獲取當前 OpenClaw 配置

**回應範例**：
```json
{
  "current_model": "google-antigravity/claude-sonnet-4-5",
  "gateway_running": true,
  "quota_remaining": 85,
  "warnings": [],
  "config": { ... }
}
```

### `POST /api/switch-model`
**功能**：切換主要模型並重啟 Gateway

**請求格式**：
```json
{
  "model": "anthropic/claude-sonnet-4-5"
}
```

**回應範例**：
```json
{
  "success": true,
  "message": "已切換到 anthropic/claude-sonnet-4-5",
  "new_model": "anthropic/claude-sonnet-4-5"
}
```

### `GET /api/models`（已增強）
**新增功能**：
- 即時解析 `openclaw models` 輸出
- 包含 Cooldown 倒數秒數
- 包含配額剩餘百分比
- 包含模型完整名稱（provider/model）

---

## 🎨 設計特色

### 賽博朋克配色系統
- **主色調**：霓虹粉紫漸層 (#ff0080 → #7928ca)
- **強調色**：電光藍 (#00f0ff)、螢光綠 (#00ff88)
- **警告**：警告橙 (#ffaa00)
- **錯誤**：霓虹粉 (#ff0080)
- **背景**：深黑藍系 (#0a0a0a, #1a1a2e, #16213e)

### 動畫特效時序
| 動畫 | 時長 | 效果 |
|------|------|------|
| 按鈕懸停 | 0.3s | 上浮 + 發光增強 |
| Modal 開啟 | 0.3s | 向上滑入 + 淡入 |
| Toast 通知 | 0.3s | 從右滑入 |
| 狀態脈動 | 2s | 陰影擴散循環 |
| 霓虹流動 | 3s | 彩色線條流動 |
| 背景光暈 | 8s | 脈動 + 縮放 |
| 按鈕光暈 | 1.5s | 旋轉 360度 |

### 特殊效果
- **毛玻璃效果**：Modal 背景帶 `backdrop-filter: blur()`
- **漸層文字**：使用 `background-clip: text` 實現彩色漸層
- **多層陰影**：疊加粉/藍雙色 `box-shadow` 模擬霓虹燈
- **掃描線**：半透明層從左到右掃過（0.5s）

### 響應式斷點
- **桌機**：> 768px（多列網格）
- **手機/平板**：≤ 768px（單列佈局）

---

## 🎨 主題切換

### 賽博朋克主題（當前）
```bash
# 檔案位置
frontend/css/main.css
```

### 切換回紫色主題
```bash
cd frontend/css
mv main.css main-cyberpunk.css
mv main.css.backup main.css
# 重新整理瀏覽器即可
```

### 主題對比
| 特色 | 賽博朋克 | 紫色主題（舊版） |
|------|---------|----------------|
| 背景 | 深黑 + 網格 + 光暈 | 紫色漸層 |
| 主色 | 霓虹粉/電光藍/螢光綠 | 紫色漸層 |
| 特效 | 發光 + 流動線 + 掃描 | 基礎陰影 |
| 文字 | 發光漸層 | 純色 |
| 動畫 | 7+ 種特效 | 基礎過渡 |
| 風格 | 未來科技賽博朋克 | 現代專業 |

---

## 🐛 疑難排解

### Gateway 狀態顯示為紅色
**原因**：Gateway 服務未運行

**解決方法**：
```bash
openclaw gateway start
```

### 切換模型失敗
**可能原因**：
1. 目標模型處於 Cooldown 狀態
2. 配置文件權限問題
3. Gateway 重啟失敗

**解決方法**：
1. 等待 Cooldown 結束
2. 檢查 `~/.openclaw/openclaw.json` 權限
3. 手動重啟 Gateway：`openclaw gateway restart`

### 數據不刷新
**原因**：後端伺服器未運行或端口被佔用

**解決方法**：
```bash
# 檢查端口
lsof -i :3737

# 重啟伺服器
node backend/server.js
```

---

## 📊 性能優化

- **1 秒刷新**：使用輕量級 API 請求，不影響性能
- **並行請求**：前端使用 `Promise.all` 並行獲取數據
- **DOM 更新最小化**：只更新變化的元素
- **CSS 動畫**：使用 GPU 加速的 `transform` 屬性

---

## 🔮 未來可能的改進

- [ ] 使用 WebSocket 實現真正的即時推送
- [ ] 新增成本預測圖表（Chart.js）
- [ ] 更多主題選項：
  - [ ] 深空藍主題（Space Blue）
  - [ ] 黑客綠主題（Hacker Green）
  - [ ] 科技藍主題（Tech Blue）
  - [ ] 主題切換器 UI
- [ ] 歷史數據視覺化（折線圖、圓餅圖）
- [ ] 多語言支援（中/英切換）
- [ ] 匯出報表功能（CSV/PDF）
- [ ] 自訂警報閾值
- [ ] 模型效能比較分析

---

## 📝 更新日誌

### v2.0.0 (2026-02-02)
- ✨ 新增頂部控制面板
- ✨ 新增智能模型切換功能
- ✨ 新增 Cooldown 倒數計時器
- ✨ 新增 Toast 通知系統
- ✨ 改為 1 秒即時刷新
- 🎨 全面優化 UI/UX 設計
- ⚡ **採用賽博朋克主題**
  - 霓虹粉/電光藍/螢光綠配色
  - 網格背景 + 脈動光暈
  - 霓虹流動線動畫
  - 發光邊框與文字特效
  - 掃描線 + 旋轉光暈動畫
- 🔧 新增 `/api/config` 和 `/api/switch-model` API
- 🐛 修復模型列表顯示問題
- 📚 新增 `CYBERPUNK_THEME.md` 配色文檔

### v1.0.0 (原始版本)
- 基礎 Token 用量監控
- 模型配額顯示
- 成本估算
- 歷史數據查詢

---

## 🙏 致謝

此升級專為非工程師使用者設計，確保每個功能都直觀易用。

賽博朋克主題靈感來自：
- 🎮 Cyberpunk 2077
- 🎬 Blade Runner
- 💿 Tron
- 🟢 Matrix
- 🌃 Synthwave 文化

如有任何問題或建議，歡迎隨時反饋！⚡🦞

---

**Enjoy your Neon-Lit Token Dashboard!** 🌃✨
