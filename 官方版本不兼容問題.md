# ğŸš¨ é‡å¤§ç™¼ç¾ï¼šé…ç½®æª”æ¡ˆèˆ‡å®˜æ–¹ç‰ˆæœ¬ä¸å…¼å®¹

> OpenClaw é…ç½®æ ¼å¼å·²æ›´æ–°ï¼ŒDashboard è¨­è¨ˆéœ€è¦èª¿æ•´

---

## ğŸ” ç™¼ç¾çš„å•é¡Œ

### 1. âŒ é…ç½®æª”æ¡ˆæ ¼å¼éŒ¯èª¤

**éŒ¯èª¤è¨Šæ¯ï¼š**
```
Invalid config at /Users/user/.openclaw/openclaw.json:
- <root>: Unrecognized key: "llm"
```

**åŸå› ï¼š**
```
å®˜æ–¹ OpenClaw çš„é…ç½®æ ¼å¼å·²æ›´æ–°
èˆŠçš„ "llm" æ¬„ä½ä¸å†è¢«è­˜åˆ¥
å°è‡´ Gateway ç„¡æ³•å•Ÿå‹•
```

### 2. âŒ Gateway ç¢ºå¯¦æœªé‹è¡Œ

**æª¢æŸ¥çµæœï¼š**
```bash
pgrep -fl "openclaw-gateway"  # ç„¡è¼¸å‡º
launchctl list | grep openclaw  # ç„¡æœå‹™
```

**Dashboard API å›å‚³ï¼š**
```json
{
  "gateway_running": false,
  "warnings": ["Gateway æœªé‹è¡Œ"]
}
```

**çµè«–ï¼š** Dashboard åµæ¸¬æ˜¯æ­£ç¢ºçš„ï¼ŒGateway çœŸçš„æ²’é‹è¡Œï¼

### 3. âš ï¸ å®˜æ–¹ OpenClaw ä½¿ç”¨ä¸åŒçš„è³‡æ–™çµæ§‹

**å®˜æ–¹æª”æ¡ˆï¼š**
```
src/infra/provider-usage.fetch.antigravity.ts
src/infra/provider-usage.fetch.gemini.ts
src/infra/provider-usage.fetch.copilot.ts
```

**ç”¨é€”ï¼š** å¾å„ provider æŠ“å–ç”¨é‡æ•¸æ“š
**æ–¹å¼ï¼š** ç›´æ¥ API èª¿ç”¨ï¼Œä¸æ˜¯å¾æœ¬åœ°è³‡æ–™åº«

---

## ğŸ“Š Dashboard è¨­è¨ˆèˆ‡å®˜æ–¹çš„å·®ç•°

### Dashboard ç•¶å‰è¨­è¨ˆ
```
è³‡æ–™ä¾†æºï¼š
1. ~/.openclaw/openclaw.json (é…ç½®)
2. æœ¬åœ° SQLite è³‡æ–™åº« (ç”¨é‡è¨˜éŒ„)
3. openclaw CLI å‘½ä»¤è¼¸å‡º

å‡è¨­ï¼š
- é…ç½®æª”æ¡ˆæœ‰ "llm" æ¬„ä½
- æœ‰æœ¬åœ°è³‡æ–™åº«è¨˜éŒ„ç”¨é‡
- openclaw models å‘½ä»¤å¯ç”¨
```

### å®˜æ–¹ OpenClaw å¯¦éš›æ¶æ§‹
```
è³‡æ–™ä¾†æºï¼š
1. ~/.openclaw/openclaw.json (æ–°æ ¼å¼é…ç½®)
2. è¨˜æ†¶é«”ä¸­çš„ä½¿ç”¨è¨˜éŒ„
3. ç›´æ¥å¾ provider API æŠ“å–

ç‰¹é»ï¼š
- é…ç½®æ ¼å¼å·²æ›´æ–°ï¼ˆç„¡ "llm" æ¬„ä½ï¼‰
- ç”¨é‡æ•¸æ“šåœ¨è¨˜æ†¶é«”ä¸­
- é€é Gateway API å­˜å–
```

---

## âœ… ç«‹å³ä¿®å¾©æ–¹æ¡ˆ

### ä¿®å¾© 1ï¼šé‡æ–°é…ç½® OpenClaw

```bash
# å‚™ä»½ç•¶å‰é…ç½®
cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.backup

# é‡æ–°é…ç½®ï¼ˆä½¿ç”¨å®˜æ–¹æ ¼å¼ï¼‰
openclaw configure
```

### ä¿®å¾© 2ï¼šä½¿ç”¨å®˜æ–¹ Gateway API

Dashboard æ‡‰è©²æ”¹ç‚ºï¼š
```javascript
// ä¸è¦è®€å– openclaw.json çš„ "llm" æ¬„ä½
// æ”¹ç‚ºé€é Gateway API å–å¾—è³‡è¨Š

// å®˜æ–¹ Gateway API ç«¯é»ï¼š
GET http://localhost:18789/api/status
GET http://localhost:18789/api/models
GET http://localhost:18789/api/usage
```

### ä¿®å¾© 3ï¼šæª¢æŸ¥ OpenClaw ç‰ˆæœ¬

```bash
openclaw --version

# å¦‚æœç‰ˆæœ¬éèˆŠï¼Œéœ€è¦æ›´æ–°
npm install -g openclaw@latest
```

---

## ğŸ”§ å¿«é€Ÿè¨ºæ–·

### æ­¥é©Ÿ 1ï¼šæŸ¥çœ‹é…ç½®æª”æ¡ˆ

```bash
cat ~/.openclaw/openclaw.json
```

**æª¢æŸ¥ï¼š**
- âœ… æœ‰æ²’æœ‰ "llm" æ¬„ä½ï¼ˆèˆŠæ ¼å¼ï¼‰
- âœ… æœ‰æ²’æœ‰éŒ¯èª¤çš„é…ç½®

### æ­¥é©Ÿ 2ï¼šå˜—è©¦å•Ÿå‹• Gateway

```bash
# åœæ­¢èˆŠçš„
pkill -f openclaw-gateway

# é‡æ–°å•Ÿå‹•
openclaw gateway start

# æŸ¥çœ‹éŒ¯èª¤
openclaw logs
```

### æ­¥é©Ÿ 3ï¼šæª¢æŸ¥ Gateway Control UI

```bash
# é–‹å•Ÿç€è¦½å™¨
open http://localhost:18789

# æˆ–æ¸¬è©¦ API
curl http://localhost:18789/api/status
```

---

## ğŸ’¡ å»ºè­°çš„ä¿®å¾©é †åº

### éšæ®µ 1ï¼šä¿®å¾© OpenClaw é…ç½®ï¼ˆå„ªå…ˆï¼‰

```bash
# 1. å‚™ä»½ç•¶å‰é…ç½®
cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.backup

# 2. æŸ¥çœ‹éŒ¯èª¤
openclaw doctor

# 3. é‡æ–°é…ç½®
openclaw configure

# 4. å•Ÿå‹• Gateway
openclaw gateway start

# 5. é©—è­‰
pgrep -f openclaw-gateway
curl http://localhost:18789/api/status
```

### éšæ®µ 2ï¼šä¿®æ”¹ Dashboard ä»£ç¢¼ï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœå®˜æ–¹ API å¯ç”¨ï¼Œä¿®æ”¹ Dashboardï¼š

```javascript
// backend/server.js

// æ–¹æ¡ˆ Aï¼šä½¿ç”¨å®˜æ–¹ Gateway API
app.get('/api/config', async (req, res) => {
  try {
    // å¾ Gateway Control UI API å–å¾—è³‡è¨Š
    const response = await fetch('http://localhost:18789/api/status');
    const data = await response.json();
    
    res.json({
      current_model: data.currentModel,
      gateway_running: true,
      quota_remaining: data.quotaRemaining,
      warnings: []
    });
  } catch (error) {
    // Gateway æœªé‹è¡Œ
    res.json({
      gateway_running: false,
      warnings: ['Gateway æœªé‹è¡Œ']
    });
  }
});
```

### éšæ®µ 3ï¼šé©—è­‰ä¿®å¾©

```bash
# 1. é‡å•Ÿ Dashboard
é›™æ“Šã€Œå•Ÿå‹• Dashboard.commandã€

# 2. æª¢æŸ¥ Gateway ç‹€æ…‹
æ‡‰è©²é¡¯ç¤ºã€Œé‹è¡Œä¸­ã€

# 3. æª¢æŸ¥æ¨¡å‹æ•¸æ“š
æ‡‰è©²èƒ½çœ‹åˆ°æ¨¡å‹åˆ—è¡¨
```

---

## ğŸ¯ é—œéµå•é¡Œåˆ†æ

### Dashboard ç‚ºä»€éº¼åµæ¸¬ä¸åˆ° Gatewayï¼Ÿ

**ç­”æ¡ˆï¼šGateway çœŸçš„æ²’é‹è¡Œï¼**

**åŸå› éˆï¼š**
```
1. openclaw.json é…ç½®æ ¼å¼éŒ¯èª¤
   â†“
2. OpenClaw æ‹’çµ•è¼‰å…¥é…ç½®ï¼ˆ"Unrecognized key: llm"ï¼‰
   â†“
3. Gateway ç„¡æ³•å•Ÿå‹•
   â†“
4. pgrep æ‰¾ä¸åˆ° openclaw-gateway é€²ç¨‹
   â†“
5. Dashboard æ­£ç¢ºåµæ¸¬åˆ°ã€Œæœªé‹è¡Œã€
```

### ç‚ºä»€éº¼æœƒæœ‰é…ç½®æ ¼å¼å•é¡Œï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. OpenClaw æ›´æ–°äº†é…ç½®æ ¼å¼
2. èˆŠçš„é…ç½®æª”æ¡ˆæ²’æœ‰é·ç§»
3. æ‰‹å‹•ç·¨è¼¯é…ç½®æ™‚ä½¿ç”¨äº†èˆŠæ ¼å¼

---

## ğŸ“‹ å®Œæ•´æª¢æŸ¥æ¸…å–®

### âœ… ç«‹å³æª¢æŸ¥

- [ ] æŸ¥çœ‹ `~/.openclaw/openclaw.json` å…§å®¹
- [ ] åŸ·è¡Œ `openclaw doctor` æŸ¥çœ‹éŒ¯èª¤
- [ ] åŸ·è¡Œ `openclaw --version` ç¢ºèªç‰ˆæœ¬
- [ ] æª¢æŸ¥ Gateway æ˜¯å¦çœŸçš„åœ¨é‹è¡Œ
- [ ] æ¸¬è©¦ Gateway Control UI (port 18789)

### âœ… ä¿®å¾©æ­¥é©Ÿ

- [ ] å‚™ä»½ç•¶å‰é…ç½®
- [ ] é‡æ–°åŸ·è¡Œ `openclaw configure`
- [ ] å•Ÿå‹• Gateway: `openclaw gateway start`
- [ ] é©—è­‰ Gateway é‹è¡Œ
- [ ] é‡å•Ÿ Dashboard
- [ ] ç¢ºèªæ•¸æ“šé¡¯ç¤ºæ­£å¸¸

---

## ğŸš€ ç«‹å³åŸ·è¡Œ

```bash
# 1. è¨ºæ–·å•é¡Œ
openclaw doctor

# 2. æŸ¥çœ‹é…ç½®
cat ~/.openclaw/openclaw.json | head -50

# 3. å‚™ä»½
cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.$(date +%Y%m%d)

# 4. é‡æ–°é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰
openclaw configure

# 5. å•Ÿå‹• Gateway
openclaw gateway start

# 6. é©—è­‰
pgrep -f openclaw-gateway
curl http://localhost:18789/api/status

# 7. é‡å•Ÿ Dashboard
é›™æ“Šã€Œå•Ÿå‹• Dashboard.commandã€
```

---

## ğŸ“ éœ€è¦æ›´å¤šè³‡è¨Š

è«‹åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ä¸¦å›å ±çµæœï¼š

```bash
# 1. OpenClaw ç‰ˆæœ¬
openclaw --version

# 2. é…ç½®è¨ºæ–·
openclaw doctor

# 3. é…ç½®å…§å®¹ï¼ˆå‰ 50 è¡Œï¼‰
cat ~/.openclaw/openclaw.json | head -50

# 4. Gateway æ—¥èªŒ
openclaw logs | tail -50
```

---

**æ ¸å¿ƒå•é¡Œï¼šOpenClaw é…ç½®æ ¼å¼ä¸å…¼å®¹ï¼Œå°è‡´ Gateway ç„¡æ³•å•Ÿå‹•** ğŸš¨

**è§£æ±ºæ–¹æ¡ˆï¼šé‡æ–°é…ç½® OpenClawï¼Œä½¿ç”¨å®˜æ–¹æ ¼å¼** âœ…
