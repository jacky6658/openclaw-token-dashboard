#!/bin/bash

# macOS æ¬Šé™ä¿®å¾©å·¥å…·
# ä¿®å¾©æ‰€æœ‰ .command å’Œ .sh æª”æ¡ˆçš„åŸ·è¡Œæ¬Šé™

clear

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                      â•‘"
echo "â•‘        ğŸ”“ macOS æ¬Šé™ä¿®å¾©å·¥å…· ğŸ”“                     â•‘"
echo "â•‘                                                      â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# ç²å–è…³æœ¬æ‰€åœ¨ç›®éŒ„
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$DIR"

echo "ğŸ“ ç•¶å‰ç›®éŒ„: $DIR"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "1ï¸âƒ£  æ¸…é™¤éš”é›¢å±¬æ€§ï¼ˆQuarantineï¼‰"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ”§ æ­£åœ¨æ¸…é™¤ .command æª”æ¡ˆçš„éš”é›¢å±¬æ€§..."
xattr -cr *.command 2>/dev/null
echo "âœ… å·²æ¸…é™¤ .command æª”æ¡ˆ"

echo ""
echo "ğŸ”§ æ­£åœ¨æ¸…é™¤ .sh æª”æ¡ˆçš„éš”é›¢å±¬æ€§..."
xattr -cr *.sh 2>/dev/null
echo "âœ… å·²æ¸…é™¤ .sh æª”æ¡ˆ"

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "2ï¸âƒ£  è¨­å®šåŸ·è¡Œæ¬Šé™"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ”§ æ­£åœ¨è¨­å®šåŸ·è¡Œæ¬Šé™..."
chmod +x *.command 2>/dev/null
chmod +x *.sh 2>/dev/null
echo "âœ… å·²è¨­å®šåŸ·è¡Œæ¬Šé™"

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "3ï¸âƒ£  é©—è­‰ä¿®å¾©çµæœ"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# åˆ—å‡ºæ‰€æœ‰å¯åŸ·è¡Œæª”æ¡ˆ
echo "ğŸ“‹ å¯åŸ·è¡Œæª”æ¡ˆåˆ—è¡¨ï¼š"
echo ""
ls -1 *.command *.sh 2>/dev/null | while read file; do
    if [ -x "$file" ]; then
        echo "  âœ… $file"
    else
        echo "  âŒ $fileï¼ˆç„¡åŸ·è¡Œæ¬Šé™ï¼‰"
    fi
done

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "4ï¸âƒ£  ä½¿ç”¨èªªæ˜"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ’¡ å¦‚ä½•ä½¿ç”¨ .command æª”æ¡ˆï¼š"
echo ""
echo "æ–¹æ³•ä¸€ï¼šç›´æ¥é›™æ“Šï¼ˆé¦–æ¬¡ï¼‰"
echo "  1. é›™æ“Šæª”æ¡ˆ"
echo "  2. å¦‚æœå‡ºç¾è­¦å‘Šï¼šå³éµ > æ‰“é–‹"
echo "  3. é»æ“Šã€Œæ‰“é–‹ã€ç¢ºèª"
echo "  4. âœ… ä¹‹å¾Œå°±èƒ½ç›´æ¥é›™æ“Š"
echo ""
echo "æ–¹æ³•äºŒï¼šå¾çµ‚ç«¯æ©ŸåŸ·è¡Œ"
echo "  ./'æª”æ¡ˆåç¨±.command'"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "5ï¸âƒ£  å¦‚æœä»ç„¡æ³•åŸ·è¡Œ"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "ğŸ”’ macOS å®‰å…¨æ€§è¨­å®šï¼š"
echo ""
echo "1. ç³»çµ±åå¥½è¨­å®š"
echo "2. å®‰å…¨æ€§èˆ‡éš±ç§"
echo "3. ä¸€èˆ¬"
echo "4. çœ‹åˆ°ã€Œå·²é˜»æ“‹ XXX.commandã€"
echo "5. é»æ“Šã€Œä»è¦æ‰“é–‹ã€"
echo ""

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                    ä¿®å¾©å®Œæˆï¼                        â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo "âœ… æ‰€æœ‰ .command æª”æ¡ˆå·²ä¿®å¾©"
echo "âœ… ç¾åœ¨å¯ä»¥å˜—è©¦é›™æ“ŠåŸ·è¡Œ"
echo ""
echo "ğŸ“ å¦‚æœé¦–æ¬¡é–‹å•Ÿä»å‡ºç¾è­¦å‘Šï¼š"
echo "   å³éµ > æ‰“é–‹ > ç¢ºèª"
echo ""
read -p "æŒ‰ Enter éµé—œé–‰è¦–çª—..."
