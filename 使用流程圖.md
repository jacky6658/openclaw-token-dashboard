# 🎯 OpenClaw Token Dashboard - 完整使用流程

---

## 📊 三種使用方式

```
┌─────────────────────────────────────────────────────────────┐
│                        使用方式選擇                          │
└─────────────────────────────────────────────────────────────┘
                           │
           ┌───────────────┼───────────────┐
           │               │               │
           ▼               ▼               ▼
    ┌──────────┐    ┌──────────┐    ┌──────────┐
    │ 電腦訪問 │    │ 手機訪問 │    │ 分享朋友 │
    └──────────┘    └──────────┘    └──────────┘
```

---

## 💻 電腦訪問流程

### 圖形化啟動（推薦）

```
1. 雙擊「啟動 Dashboard.command」
   │
   ├─ 自動檢查 Node.js ✅
   ├─ 自動檢查 OpenClaw ✅
   ├─ 自動安裝依賴（首次）✅
   ├─ 自動啟動 Gateway ✅
   ├─ 顯示訪問資訊 📍
   │  • 本機網址：http://localhost:3737
   │  • 手機網址：http://192.168.x.x:3737
   │  • QR Code 連結
   │
   └─ 自動開啟瀏覽器 🌐
      │
      ▼
   ┌─────────────────────────────────┐
   │   🦞 Dashboard 介面開啟！       │
   │   ⚡ 賽博朋克霓虹風格           │
   │   ✨ 1 秒即時刷新               │
   └─────────────────────────────────┘
```

### 終端機啟動

```
cd /path/to/token-dashboard
   │
   ├─ npm install（首次）
   │
   └─ ./start.sh
      │
      ▼
   開啟瀏覽器：http://localhost:3737
```

---

## 📱 手機訪問流程

### 方法一：QR Code 掃描（最簡單）

```
電腦端：
1. 雙擊「手機訪問指南.html」
   │
   ▼
2. 點擊「自動偵測我的 IP」按鈕
   │
   ├─ 自動偵測電腦 IP ✅
   ├─ 生成手機訪問網址 ✅
   └─ 顯示 QR Code 🔲
      │
      ▼
手機端：
3. 用手機相機掃描 QR Code
   │
   ▼
4. 點擊通知中的連結
   │
   ▼
┌─────────────────────────────────┐
│   📱 手機版 Dashboard 開啟！    │
│   ✨ 完整響應式設計             │
│   🔄 可切換模型                 │
└─────────────────────────────────┘
```

### 方法二：手動輸入網址

```
1. 確認同一個 WiFi ✅
   │
   ├─ 電腦：連接到「家裡WiFi」
   └─ 手機：連接到「家裡WiFi」
   │
   ▼
2. 查詢電腦 IP
   │
   ├─ 啟動器會顯示
   └─ 或：系統偏好設定 > 網路 > WiFi
   │
   ▼
3. 手機瀏覽器輸入
   │
   http://[電腦IP]:3737
   │
   例如：http://192.168.1.100:3737
   │
   ▼
   開啟！✨
```

---

## 📦 分享給朋友流程

### 打包流程

```
1. 雙擊「打包分享.command」
   │
   ├─ 自動打包專案 📦
   ├─ 排除 node_modules ✅
   ├─ 排除資料庫 ✅
   ├─ 排除日誌 ✅
   │
   ▼
2. 自動儲存到桌面
   │
   檔名：token-dashboard-20260202.zip
   大小：~5 MB
   │
   ▼
3. Finder 自動開啟顯示檔案 📂
   │
   ▼
4. 分享給朋友
   │
   • AirDrop 傳送
   • 雲端硬碟上傳
   • 通訊軟體傳送
```

### 朋友使用流程

```
朋友收到 token-dashboard.zip
   │
   ▼
1. 解壓縮
   │
   ▼
2. 雙擊「啟動 Dashboard.command」
   │
   ├─ 首次需要：右鍵 > 打開 > 確認
   │
   ├─ 自動檢查環境
   │  ├─ Node.js ✅
   │  └─ OpenClaw ✅
   │
   ├─ 自動安裝依賴（首次）
   │
   └─ 自動開啟瀏覽器
      │
      ▼
   ┌─────────────────────────────────┐
   │   🎉 開始使用！                 │
   │                                 │
   │   自動連接到朋友自己的：        │
   │   • OpenClaw 配置               │
   │   • AI Keys 狀態                │
   │   • Token 用量數據              │
   └─────────────────────────────────┘
```

---

## 🔄 模型切換流程

```
Dashboard 介面
   │
   ▼
1. 點擊「切換模型」按鈕
   │
   ▼
2. Modal 彈窗顯示
   │
   ├─ 可用模型（綠色邊框）
   ├─ Cooldown 模型（灰色斜紋）
   ├─ 當前模型（粉紅邊框 ⭐）
   └─ 智能推薦（💡 配額充足模型）
   │
   ▼
3. 選擇模型 + 點擊「切換到此模型」
   │
   ├─ 按鈕顯示「切換中...」
   │
   ▼
4. 後端處理
   │
   ├─ 讀取 ~/.openclaw/openclaw.json
   ├─ 更新 primary 模型
   ├─ 寫回配置文件
   ├─ openclaw gateway stop
   ├─ 等待 1 秒
   └─ openclaw gateway start
   │
   ▼
5. 前端反饋
   │
   ├─ Toast 通知「已切換到 XXX」✅
   ├─ Modal 關閉
   └─ 頂部面板更新顯示新模型
   │
   ▼
┌─────────────────────────────────┐
│   ✅ 切換完成！                 │
│                                 │
│   所有 Telegram Bot 對話        │
│   立即使用新模型 🤖             │
└─────────────────────────────────┘
```

---

## 🎨 介面導覽

```
┌───────────────────────────────────────────────────────────┐
│  Header 標頭                                               │
│  ⚡ OpenClaw Token Dashboard                              │
│  [ 總覽 ] [ 模型 ] [ 速率限制 ] [ 歷史 ] [ 成本 ]        │
├───────────────────────────────────────────────────────────┤
│  控制面板                                                  │
│  🟢 當前模型    📊 85%配額    ⏱️ 0.5s    [ 切換模型 ]    │
├───────────────────────────────────────────────────────────┤
│  主要內容                                                  │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐       │
│  │ 今日消耗│ │ 本週消耗│ │ 本月消耗│ │ 今日請求│       │
│  │  2.5M   │ │  15.2M  │ │  68.5M  │ │   342   │       │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘       │
│                                                            │
│  📈 Token 消耗分佈                                         │
│  ▓▓▓▓▓▓▓▓░░░░░░░░ Input: 60%                             │
│  ▓▓▓▓▓░░░░░░░░░░ Output: 40%                             │
└───────────────────────────────────────────────────────────┘
```

---

## 📱 手機版佈局

```
┌─────────────────────┐
│  ⚡ OpenClaw        │
│  Token Dashboard    │
├─────────────────────┤
│ [ 總覽 ] [ 模型 ]  │
│ [ 歷史 ] [ 成本 ]  │
├─────────────────────┤
│  🟢 當前模型        │
│  Claude Sonnet 4.5  │
│                     │
│  📊 配額：85%       │
│                     │
│  ⏱️ 0.5s後刷新     │
│                     │
│  ┌───────────────┐  │
│  │  🔄 切換模型  │  │
│  └───────────────┘  │
├─────────────────────┤
│                     │
│  ┌───────────────┐  │
│  │   今日消耗    │  │
│  │    2.5M       │  │
│  └───────────────┘  │
│                     │
│  ┌───────────────┐  │
│  │   本週消耗    │  │
│  │    15.2M      │  │
│  └───────────────┘  │
│                     │
└─────────────────────┘
```

---

## 🔄 數據同步流程

```
OpenClaw Bot 使用 Token
   │
   ▼
Token 用量記錄到本機
   │
   • ~/.openclaw/logs/
   • ~/.openclaw/session/
   │
   ▼
Collector 腳本收集（每 5 分鐘）
   │
   • node backend/collector/collect.js
   • 執行 openclaw session_status
   • 執行 openclaw models
   │
   ▼
寫入 SQLite 資料庫
   │
   • backend/db/openclaw-tokens.db
   • token_usage 表
   • model_quota 表
   • rate_limits 表
   │
   ▼
Dashboard 讀取數據（每 1 秒）
   │
   • GET /api/overview
   • GET /api/models
   • GET /api/config
   │
   ▼
前端渲染顯示
   │
   • 卡片、表格、圖表
   • 配額圓環、倒數計時
   │
   ▼
使用者看到即時數據 ✨
```

---

## 🌐 網路拓撲

```
┌─────────────────────────────────────────────────┐
│              家中 WiFi 網路                      │
│  SSID: 我的WiFi                                 │
│  網段: 192.168.1.0/24                           │
│                                                  │
│  ┌──────────────────┐      ┌───────────────┐   │
│  │   💻 Mac 電腦    │      │  📱 iPhone    │   │
│  │                  │      │               │   │
│  │  IP: 192.168.1.100│◄────┤  IP: 192.168.1.50│
│  │                  │ WiFi│               │   │
│  │  Dashboard Server│      │  Safari 瀏覽器│   │
│  │  Port: 3737      │      │               │   │
│  └──────────────────┘      └───────────────┘   │
│           ▲                         │           │
│           │                         │           │
│           └─────────────────────────┘           │
│          區域網路連接（無需網際網路）           │
└─────────────────────────────────────────────────┘

電腦運行：http://localhost:3737
手機訪問：http://192.168.1.100:3737
```

---

## 🎯 功能矩陣

| 功能 | 電腦 | 手機 | 說明 |
|------|------|------|------|
| 查看用量 | ✅ | ✅ | 即時同步 |
| 切換模型 | ✅ | ✅ | 一鍵切換 |
| 查看配額 | ✅ | ✅ | 彩色圓環 |
| Cooldown 倒數 | ✅ | ✅ | 即時倒數 |
| 歷史數據 | ✅ | ✅ | 7 日趨勢 |
| 成本分析 | ✅ | ✅ | 詳細分解 |
| Toast 通知 | ✅ | ✅ | 即時反饋 |
| 智能推薦 | ✅ | ✅ | 最佳模型 |

**所有功能在手機上完全可用！** 📱✨

---

## 🔐 安全性流程

```
數據流向：
OpenClaw (本機)
   ↓
~/.openclaw/openclaw.json (本機)
   ↓
Dashboard Server (本機 Port 3737)
   ↓
瀏覽器 (本機 or 同 WiFi 設備)

✅ 所有數據都在本機或區域網路
✅ 不會傳到網際網路
✅ 不需要雲端伺服器
⚠️ 只在私人 WiFi 中使用
```

---

## 📊 使用統計

### 啟動時間
- 首次啟動：~60 秒（含安裝依賴）
- 正常啟動：~5 秒
- 自動開啟瀏覽器：+2 秒

### 刷新頻率
- 數據刷新：1 秒
- 倒數計時：0.1 秒（視覺更新）
- 配額更新：即時

### 資源佔用
- 記憶體：~50 MB
- CPU：<1%（閒置時）
- 網路：區域網路流量（極小）

---

## 🎓 學習路徑

```
新手
  │
  ├─ 閱讀 README_FOR_FRIEND.md
  ├─ 雙擊「啟動 Dashboard.command」
  └─ 開始使用基本功能
     │
     ▼
進階
  │
  ├─ 閱讀 DEPLOYMENT_GUIDE.md
  ├─ 學習終端機啟動
  ├─ 設定自動啟動
  └─ 手機訪問配置
     │
     ▼
專家
  │
  ├─ 閱讀 FEATURES_CHECKLIST.md
  ├─ 閱讀 IMPLEMENTATION_SUMMARY.md
  ├─ 自訂修改程式碼
  └─ 整合到工作流程
```

---

## 🎉 完整功能列表

### 監控功能
- ✅ 1 秒即時刷新
- ✅ 當前模型顯示
- ✅ Gateway 狀態監控
- ✅ 配額圓形圖
- ✅ Cooldown 倒數

### 操作功能
- ✅ 一鍵切換模型
- ✅ 智能模型推薦
- ✅ 自動重啟 Gateway
- ✅ Toast 即時通知

### 數據功能
- ✅ Token 消耗統計
- ✅ 成本估算
- ✅ 歷史趨勢
- ✅ 速率限制監控
- ✅ 模型配額狀態

### 跨平台功能
- ✅ 桌機完整功能
- ✅ 手機完整功能
- ✅ 平板完整功能
- ✅ 響應式設計

### 視覺功能
- ✅ 賽博朋克主題
- ✅ 霓虹發光特效
- ✅ 流動線動畫
- ✅ 掃描線效果
- ✅ Icon 圖示化

---

**開始您的 Dashboard 之旅！** ⚡🦞

雙擊「啟動 Dashboard.command」立即開始 🚀
